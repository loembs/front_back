<!-- Justification Details -->
  <div class="p-6">
    <div class="bg-white rounded-lg shadow-sm p-6">
      <div class="mb-4">
        <h3 class="text-lg font-medium text-gray-800">
          {{justification()?.nomEtudiant}} / {{justification()?.matricule}}
        </h3>
      </div>

      <div class="bg-[#FA9620] text-white rounded-lg p-6 mb-6">
        <div class="mb-2">
          <span class="text-sm">{{justification()?.date}}</span>
        </div>
        <div class="mb-2">
          <span class="text-sm">{{justification()?.nomModule}}</span>
        </div>
        <div class="text-sm opacity-90">
          JUSTIFICATIF :
        </div>
      </div>
      <!-- Pièce jointe -->
      <div class="mb-6">
        <h4 class="text-lg font-medium text-gray-800 mb-2">Pièce jointe{{ isArray(justification()?.images) && justification()!.images.length > 1 ? 's' : '' }}</h4>
        <!-- Bloc pour plusieurs pièces jointes -->
        <div *ngIf="isArray(justification()?.images) && justification()!.images.length > 0" class="flex flex-wrap items-center space-x-4">
          <div *ngFor="let imageUrl of justification()!.images" class="w-12 h-12">
             <img 
                 [src]="imageUrl" 
                 alt="Pièce jointe" 
                 class="w-full h-full object-cover rounded-full shadow-sm cursor-pointer"
                 (click)="openPieceJointe(imageUrl)"
                 (keydown.enter)="openPieceJointe(imageUrl)"
                 role="button"
                 tabindex="0">
          </div>
        </div>

        <!-- Bloc pour une seule pièce jointe ou pas de pièce jointe -->
        <div *ngIf="!isArray(justification()?.images)" class="flex items-center space-x-4">
          <img *ngIf="justification()?.images"
               [src]="justification()?.images"
               alt="Pièce jointe"
               class="w-12 h-12 object-cover rounded-full shadow-sm cursor-pointer"
               (click)="openPieceJointe(justification()?.images ?? '')"
               (keydown.enter)="openPieceJointe(justification()?.images ?? '')"
               role="button"
               tabindex="0">
          <img *ngIf="!justification()?.images"
               src="https://cdn-icons-png.flaticon.com/512/1178/1178428.png"
               alt="Image par défaut"
               class="w-12 h-12 object-cover rounded-full shadow-sm cursor-pointer"
               (click)="openPieceJointe('https://cdn-icons-png.flaticon.com/512/1178/1178428.png')"
               (keydown.enter)="openPieceJointe('https://cdn-icons-png.flaticon.com/512/1178/1178428.png')"
               role="button"
               tabindex="0">
        </div>
      </div>
      <!-- Justification Text Area -->
      <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-6 min-h-[300px]">
        <div class="text-gray-700">
          {{justification()?.motif || 'Aucun texte de justification fourni.'}}
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="flex justify-end space-x-4 mt-6">
        
        <button (click)="validerJustification()" class="px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600">
          Valider
        </button>
        <button (click)="refuserJustification()" class="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600">
          Refuser
        </button>
      </div>
    </div>
  </div>