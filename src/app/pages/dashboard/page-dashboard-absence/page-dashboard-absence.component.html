<!-- Barre de filtre avec actions -->
<div class="flex gap-4 items-center p-4 bg-gray-100 my-6 rounded-lg">
  <select [(ngModel)]="absenceFilter.batiment"
    class="px-3 py-2 rounded-md border border-gray-300 text-sm">
    <option value="">Tous les bâtiments</option>
    <option value="Ingenieur">Ingénieur</option>
    <option value="Management">Management</option>
    <option value="Madiba">Madiba</option>
    <option value="Droit">Droit</option>
  </select>

  <input type="date" [(ngModel)]="absenceFilter.date"
    class="px-3 py-2 rounded-md border border-gray-300 text-sm" />

  <select [(ngModel)]="absenceFilter.status"
    class="px-3 py-2 rounded-md border border-gray-300 text-sm">
    <option value="">Tous les statuts</option>
    <option value="Justifie">Justifié</option>
    <option value="Non-justifie">Non-justifié</option>
    <option value="En-attente">En-attente</option>
  </select>

  <button (click)="applyFilter()"
    class="bg-blue-700 text-white font-bold px-4 py-2 rounded-md hover:bg-blue-900 transition">
    Rechercher
  </button>

  <button (click)="resetFilter()"
    class="bg-gray-500 text-white font-bold px-4 py-2 rounded-md hover:bg-gray-700 transition">
    Réinitialiser
  </button>
</div>

<!-- Liste des absences -->
<div class="py-4">
  <h2 class="mb-4 text-xl font-bold">LISTE DES ABSENCES</h2>
  <table class="w-full border-separate border-spacing-y-2">
    <thead>
      <tr>
        <th class="text-black font-bold">Photo</th>
        <th class="text-black font-bold">Nom</th>
        <th class="text-black font-bold">Matricule</th>
        <th class="text-black font-bold">Classe</th>
        <th class="text-black font-bold">Date</th>
        <th class="text-black font-bold">Cours</th>
        <th class="text-black font-bold">Statut</th>
        <th class="text-black font-bold">Justification</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let absence of absences" class="bg-orange-500 text-white rounded-md">
        <td><img [src]="absence.photo" alt="photo" class="w-10 h-10 rounded-md object-cover bg-black" /></td>
        <td>{{ absence.nom }}</td>
        <td>{{ absence.matricule }}</td>
        <td>{{ absence.classe }}</td>
        <td>{{ absence.date | date: 'dd/MM/yyyy' }}</td>
        <td>{{ absence.cours }}</td>
        <td>
          <span [ngClass]="{
              'bg-green-500': absence.status === 'Justifie',
              'bg-red-500': absence.status === 'Non-justifie',
              'bg-gray-800 text-white': absence.status === 'En-attente'
            }"
            class="inline-block px-3 py-1 rounded-full font-bold">
            {{ absence.status.toUpperCase() }}
          </span>
        </td>
        <td>
          <button *ngIf="absence.status === 'En-attente'"
            class="bg-blue-600 text-white font-bold text-sm px-3 py-1 rounded-md hover:bg-gray-200 hover:text-black transition"
            (click)="goToValidation(absence.id)">
            Voir
          </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
