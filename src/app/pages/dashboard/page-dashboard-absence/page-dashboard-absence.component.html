<div class="ml-18">
<ism-info-user-card></ism-info-user-card>
<!-- Barre de filtre avec actions -->
<div class="flex gap-4 items-center p-4 bg-gray-100 my-6 rounded-lg">
  <select [(ngModel)]="absenceFilter.batiment"
    class="px-3 py-2 rounded-md border border-gray-300 text-sm">
    <option value="">Tous les bâtiments</option>
    <option value="Ingenieur">Ingénieur</option>
    <option value="Management">Management</option>
    <option value="Madiba">Madiba</option>
    <option value="Droit">Droit</option>
  </select>

  <input type="date" [(ngModel)]="absenceFilter.date"
    class="px-3 py-2 rounded-md border border-gray-300 text-sm" />

  <select [(ngModel)]="absenceFilter.status"
    class="px-3 py-2 rounded-md border border-gray-300 text-sm">
    <option value="">Tous les statuts</option>
    <option value="Justifie">Justifié</option>
    <option value="Non-justifie">Non-justifié</option>
    <option value="En-attente">En-attente</option>
  </select>

  <button (click)="applyFilter()"
    class="bg-blue-700 text-white font-bold px-4 py-2 rounded-md hover:bg-blue-900 transition">
    Rechercher
  </button>

  <button (click)="resetFilter()"
    class="bg-gray-500 text-white font-bold px-4 py-2 rounded-md hover:bg-gray-700 transition">
    Réinitialiser
  </button>
</div>



<!-- Liste des absences en version "cards" -->
<div class="py-4">
  <h2 class="mb-4 text-xl font-bold">LISTE DES ABSENCES</h2>

  <div *ngFor="let absence of absences" class="bg-[#FA9620] text-white rounded-lg p-4 mb-3 w-full">
    <div class="flex items-center justify-between flex-wrap">

      <!-- Infos étudiant -->
      <div class="flex items-center space-x-4 mb-2 md:mb-0">
        <div class="w-4 h-4 bg-orange-600 rounded-full flex items-center justify-center">
          <img *ngIf="absence.photo" [src]="absence.photo" alt="photo" class="w-full h-full rounded-full object-cover">
          <span *ngIf="!absence.photo" class="text-white font-bold">{{ getInitials(absence.nom) }}</span>
        </div>
        <div class="font-medium">{{ absence.nom }}</div>
      </div>

      <!-- Infos détaillées -->
      <div class="flex items-center space-x-4 flex-wrap text-sm">

        <!-- Matricule -->
        <div class="flex items-center space-x-2">
          <div class="w-6 h-4 bg-gray-300 rounded"></div>
          <span>{{ absence.matricule }}</span>
        </div>

        <!-- Classe -->
        <div class="flex items-center space-x-2">
          <div class="w-4 h-4 bg-black rounded-full"></div>
          <span>{{ absence.classe }}</span>
        </div>

        <!-- Date -->
        <div class="flex items-center space-x-2">
          <div class="w-4 h-4 bg-yellow-400" style="clip-path: polygon(50% 0%, 100% 100%, 0% 100%)"></div>
          <span>{{ absence.date | date: 'dd/MM/yyyy' }}</span>
        </div>

        <!-- Cours -->
        <div class="flex items-center space-x-2">
          <div class="w-4 h-4 bg-yellow-400"
               style="clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%)">
          </div>
          <span>{{ absence.cours }}</span>
        </div>

        <!-- Statut -->
        <div class="px-3 py-1 rounded text-xs font-medium"
             [ngClass]="{
               'bg-green-500': absence.status === 'Justifie',
               'bg-red-500': absence.status === 'Non-justifie',
               'bg-gray-800 text-white': absence.status === 'En-attente'
             }">
          {{ absence.status.toUpperCase() }}
        </div>

        <!-- Bouton Voir -->
        <div>
          <button *ngIf="absence.status === 'En-attente'"
                  class="bg-blue-600 px-3 py-1 rounded text-xs font-medium hover:bg-gray-200 hover:text-black transition"
                  (click)="goToValidation(absence.id)">
            VOIR
          </button>
        </div>
      </div>
    </div>
  </div>
</div>


</div>